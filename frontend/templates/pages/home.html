{{template "base" .}}

{{define "content"}}
<!-- Contenido principal -->
<main class="main-content">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Título de la página -->
        <div class="mb-8">
            <h1 id="i18n-latest-news" class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Últimas Noticias</h1>
            <p id="i18n-keep-informed" class="text-gray-600 dark:text-gray-300">Mantente informado con las noticias más recientes de múltiples fuentes</p>
        </div>

        <!-- Estadísticas rápidas -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p id="i18n-total-news" class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Noticias</p>
                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">{{.NewsCount}}</p>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p id="i18n-categories" class="text-sm font-medium text-gray-500 dark:text-gray-400">Categorías</p>
                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">{{len .Categories}}</p>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p id="i18n-languages" class="text-sm font-medium text-gray-500 dark:text-gray-400">Idiomas</p>
                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">{{len .Languages}}</p>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p id="i18n-rss-sources" class="text-sm font-medium text-gray-500 dark:text-gray-400">Fuentes RSS</p>
                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">33</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Categorías destacadas -->
        <div class="mb-8">
            <h2 id="i18n-featured-categories" class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Categorías Destacadas</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                {{range .Categories}}
                <a href="/categoria/{{.Code}}" class="category-card group" onclick="navigateWithLang(event, '/categoria/{{.Code}}')">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover:shadow-lg transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="font-medium text-gray-900 dark:text-white group-hover:text-blue-600 transition-colors">
                                    {{.Name}}
                                </h3>
                                <p class="text-sm text-gray-500 dark:text-gray-400">{{.Count}} noticias</p>
                            </div>
                            <svg class="w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </div>
                    </div>
                </a>
                {{end}}
            </div>
        </div>

        <!-- Noticias principales -->
        <div class="mb-8">
            <div class="flex items-center justify-between mb-6">
                <h2 id="i18n-recent-news" class="text-xl font-semibold text-gray-900 dark:text-white">Noticias Recientes</h2>
                <button 
                    type="button"
                    onclick="refreshNews()"
                    class="btn btn-primary text-sm px-4 py-2"
                    title="Actualizar noticias"
                >
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    <span id="i18n-refresh-btn">Actualizar</span>
                </button>
            </div>

            {{if .News}}
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    {{range .News}}
                        {{template "newsCard" .}}
                    {{end}}
                </div>

                <!-- Paginación -->
                {{if .Pagination}}
                    {{template "pagination" .Pagination}}
                {{end}}
            {{else}}
                <div class="text-center py-12">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                    </svg>
                    <h3 id="i18n-no-news" class="mt-2 text-sm font-medium text-gray-900 dark:text-white">No hay noticias disponibles</h3>
                    <p id="i18n-try-refresh" class="mt-1 text-sm text-gray-500 dark:text-gray-400">Intenta actualizar las noticias o cambiar los filtros(o agrega nuevas fuentes en configuración).</p>
                    <div class="mt-6">
                        <button 
                            type="button"
                            onclick="refreshNews()"
                            class="btn btn-primary"
                        >
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                            <span id="i18n-update-news">Actualizar Noticias</span>
                        </button>
                    </div>
                </div>
            {{end}}
        </div>
    </div>
</main>
<script>
// i18n para textos estáticos de home usando el diccionario global definido en header
document.addEventListener('DOMContentLoaded', function(){
  if (typeof t !== 'function') return;
  const map = [
    ['i18n-latest-news','latest_news'],
    ['i18n-keep-informed','keep_informed'],
    ['i18n-total-news','total_news'],
    ['i18n-categories','categories'],
    ['i18n-languages','languages'],
    ['i18n-rss-sources','rss_sources'],
    ['i18n-featured-categories','featured_categories'],
    ['i18n-recent-news','recent_news'],
    ['i18n-refresh-btn','refresh'],
    ['i18n-no-news','no_news'],
    ['i18n-try-refresh','try_refresh_or_filters'],
    ['i18n-update-news','update_news']
  ];
  map.forEach(([id,key]) => { const el = document.getElementById(id); if (el) el.textContent = t(key); });
});
</script>
{{end}}